{"version":3,"sources":["models.js","Api.js","components/header/header.js","components/loginForms/loginForms.js","components/newPostForm/newPostForm.js","components/aPost/aPost.js","App.js","index.js"],"names":["models","user","loggedIn","id","name","token","loginForms","login","password","tab","request","method","path","params","Promise","resolve","axios","then","response","console","log","data","result","error","warn","actualizePosts","_actualizePosts","apply","this","arguments","_callee","regenerator_default","a","wrap","_context","prev","next","sent","abrupt","store","posts","stop","_callee2","_context2","window","localStorage","feed_token","loginByToken","_x3","_loginByToken","_callee3","getMe","newUser","_context3","removeItem","email","_callee4","_context4","_callee5","text","_context5","newPostText","header_header","props","react_default","createElement","className","href","onClick","_logout","Api","loginForms_loginForms","switchTab","type","value","placeholder","onChange","e","target","alert","_x","_x2","_login","newPostForm_newPostForm","_x4","_addPost","aPost_aPost","post","d","Date","datetime","toString","split","fDate","concat","key","authorname","App","location","process","map","Component","ReactDOM","render","zasz","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4a98a280.chunk.js","sourcesContent":["export default {\n  user: () => {return {loggedIn:false,id:null,name:'',token:''}},\n  loginForms: () => {return {name:'',login:'',password:'',tab:'registration'}}\n}\n","import axios from 'axios';\nimport store from 'zasz';\nimport models from 'models';\n\n\nfunction request(method, path, params) {\n  return new Promise((resolve) => {\n\n      let apiServer = process.env.NODE_ENV==='development' ? 'http://localhost:5000/api/' : 'https://warhound.herokuapp.com/api/';\n\n      axios[method](apiServer + path, params)\n      .then((response) => {\n        console.log('>2', response.data)\n        return resolve({result:response.data.result})\n      }, (error) => {\n        console.warn(error)\n        return resolve({error:error.response.data})\n      })\n    });\n}\n\n\n\n\n\nexport async function actualizePosts() {\n  console.warn('START OF ACTUALIZING')\n  let response = await request('get', 'posts/get');\n  console.warn('FIN ZH')\n  if(response.error) {console.warn('AN ERROR', response.error); return; }\n  console.warn('POSTS: ',response.result)\n  store.posts = response.result;\n}\n\n\n\n\nexport async function login(login, password) {\n  let response = await request('post', 'auth/login',{login, password});\n  console.log('>LOIGN', response)\n  if(response.error) {console.warn('AN ERROR', response.error); return; }\n  window.localStorage.feed_token = response.result;\n  store.loginForms = models.loginForms();\n  loginByToken(response.result);\n}\n\n\nexport async function loginByToken(token) {\n  let getMe = await request('get', 'auth/getMe?token='+token);\n  if(getMe.error) {\n    window.localStorage.removeItem('feed_token');\n    console.warn('WRONG TOKEN, so i am deleting it', getMe.error);\n    return;\n  }\n\n  let newUser = models.user();\n  newUser.loggedIn = true;\n  newUser.name = getMe.result.name;\n  newUser.email = getMe.result.email;\n  newUser.id = getMe.result.id;\n  newUser.token = token;\n  store.user = newUser;\n}\n\n\nexport async function logout() {\n  window.localStorage.removeItem('feed_token');\n  store.user = models.user();\n}\n\n\nexport async function addPost(text) {\n  let response = await request('post', 'posts/add', {\n    token:store.user.token,\n    text\n  });\n  if(response.error) {\n    console.warn('COULDNT ADD POST', response.error);\n    return;\n  }\n  store.newPostText = '';\n  actualizePosts();\n}\n","import React from 'react';\nimport store from 'zasz';\nimport './header.css';\nimport * as Api from 'Api';\n\nexport default (props) =>\n    <div className=\"Header\">\n      <div>\n        <div/>\n        {store.user.loggedIn &&\n          <div>\n            <div>{store.user.name}</div>\n            <a href=\"javascript:void(0)\" onClick={() => Api.logout()}>Logout</a>\n          </div>\n        }\n      </div>\n    </div>\n","import React from 'react';\nimport store from 'zasz';\n\nimport * as Api from 'Api';\n\nimport './loginForms.css';\n\n\n\nexport default (props) => {\n\n    let switchTab = (tab) => store.loginForms.tab = tab\n\n    let onNameChange = (e) => store.loginForms.name = e.target.value\n    let onLoginChange = (e) => store.loginForms.login = e.target.value\n    let onPasswordChange = (e) => store.loginForms.password = e.target.value\n    let prox = (e) => {\n      if(store.loginForms.tab==='registration') {\n        window.alert('THERE IS NO Registration POINT')\n      } else {\n        Api.login(store.loginForms.login, store.loginForms.password);\n      }\n\n\n\n    }\n\n\n\n    return (<div className=\"loginForms\">\n\n        <div className=\"tabs\">\n          <div className={store.loginForms.tab==='registration' && 'active'} onClick={()=>{switchTab('registration')}}>Registration</div>\n          <div className={store.loginForms.tab==='login' && 'active'} onClick={()=>{switchTab('login')}}>Login</div>\n        </div>\n\n        <div>\n          {\n              store.loginForms.tab==='registration' && <input type=\"text\" value={store.loginForms.name} placeholder=\"Name\" onChange={onNameChange} />\n          }\n          <input type=\"text\" value={store.loginForms.login} placeholder=\"Login (email)\" onChange={onLoginChange} />\n          <input type=\"password\" value={store.loginForms.password} placeholder=\"Password\" onChange={onPasswordChange} />\n        </div>\n\n        <div className=\"button\" onClick={prox}>Sign me {store.loginForms.tab==='registration' ? 'up' : 'in'}</div>\n\n    </div>)\n\n}\n","import React from 'react';\nimport store from 'zasz';\n\nimport * as Api from 'Api';\n\nimport './newPostForm.css';\n\n\nexport default (props) => {\n\n    let onNewPostTextChange = (e) => store.newPostText = e.target.value\n    let makePost = () => Api.addPost(store.newPostText);\n\n    return (<div className=\"newPostForm\">\n        <textarea value={store.newPostText} onChange={onNewPostTextChange} />\n        <div className=\"button\" onClick={makePost}>Add post</div>\n    </div>)\n}\n","import React from 'react';\nimport './aPost.css';\n\n\n\nexport default (props) => {\n    let {post} = props;\n    let d = new Date(post.datetime);\n    d = d.toString().split(' ');\n    let fDate = `${d[1]} ${d[2]} ${d[3]} ${d[4]}`;\n\n    return (\n      <div key={post.id} className=\"aPost\">\n        <div className=\"userName\">{post.authorname}</div>\n        <div className=\"postDatetime\">{fDate}</div>\n        <div className=\"text\">{post.text}</div>\n      </div>\n    )\n\n}\n","import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport './Styles.css';\nimport * as Api from 'Api';\n\nimport Header from 'components/header/header';\nimport LoginForms from 'components/loginForms/loginForms';\nimport NewPostForm from 'components/newPostForm/newPostForm';\nimport APost from 'components/aPost/aPost';\n\nimport store from 'zasz';\n\n\nclass App extends Component {\n\n\n  componentDidMount() {\n    console.log('App mounted at ', window.location);\n    console.log( process.env );\n    Api.actualizePosts();\n\n\n    if(window.localStorage.feed_token) {\n      console.log(' heaf goog ', window.localStorage.feed_token)\n      Api.loginByToken(window.localStorage.feed_token)\n    }\n  }\n\n\n\n\n  render() {\n\n\n    return (\n      <div className=\"App\">\n        <Header />\n\n        <div className=\"topPanel\">\n          <div>\n          {store.user.loggedIn ?\n            <NewPostForm />\n            :\n            <LoginForms />\n          }\n          </div>\n        </div>\n\n        <div className=\"postList\">\n          <div>{\n            store.posts.map(post => {\n              return <APost key={post.id} post={post} />\n            })\n          }</div>\n        </div>\n\n        <div className=\"footer\">\n          <div>\n            <div>&copy; Romka 2019</div>\n            <div>a test project</div>\n          </div>\n        </div>\n\n\n      </div>\n    );\n\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport models from 'models';\nimport store, { Provider } from 'zasz';\n\nstore.user = models.user();\nstore.posts = [];\nstore.newPostText = '';\nstore.loginForms = models.loginForms();\n\nReactDOM.render(<Provider><App /></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}