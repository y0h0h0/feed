{"version":3,"sources":["models.js","Api.js","components/header/header.js","components/loginForms/loginForms.js","components/newPostForm/newPostForm.js","components/aPost/aPost.js","App.js","index.js"],"names":["models","user","loggedIn","id","name","token","loginForms","login","password","tab","request","method","path","params","Promise","resolve","apiServer","window","location","origin","axios","then","response","console","log","data","result","catch","error","warn","JSON","stringify","message","actualizePosts","_actualizePosts","apply","this","arguments","_callee","regenerator_default","a","wrap","_context","prev","next","sent","abrupt","store","posts","stop","_callee2","_context2","localStorage","feed_token","loginByToken","_x3","_loginByToken","_callee3","getMe","newUser","_context3","removeItem","email","_callee4","_context4","_callee5","text","_context5","newPostText","header_header","props","react_default","createElement","className","onClick","_logout","Api","loginForms_loginForms","switchTab","type","value","placeholder","onChange","e","target","alert","_x","_x2","_login","newPostForm_newPostForm","_x4","_addPost","aPost_aPost","post","d","Date","datetime","toString","split","fDate","concat","key","authorname","App","process","map","Component","ReactDOM","render","zasz","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.5a08ef79.chunk.js","sourcesContent":["export default {\n  user: () => {return {loggedIn:false,id:null,name:'',token:''}},\n  loginForms: () => {return {name:'',login:'',password:'',tab:'registration'}}\n}\n","import axios from 'axios';\nimport store from 'zasz';\nimport models from 'models';\n\n\nfunction request(method, path, params) {\n  return new Promise((resolve) => {\n\n      let apiServer = process.env.NODE_ENV==='development' ? 'http://localhost:5000/api/' : window.location.origin+'/api/';\n\n\n\n      // axios[method](apiServer + path, params)\n      // .then((response) => {\n      //   console.log('>2', response.data)\n      //   return resolve({result:response.data.result})\n      // }, (error) => {\n      //   console.warn(error)\n      //   console.log(JSON.stringify(error, [\"message\", \"arguments\", \"type\", \"name\"]));\n      //   if(error.message === 'Network Error') return resolve({error:error.message})\n      //   else return resolve({error:error.response.data})\n      // })\n\n\n\n      axios[method](apiServer + path, params)\n      .then((response) => {\n        console.log('>2', response.data)\n        return resolve({result:response.data.result})\n      }).catch(error => {\n        console.warn(error)\n        console.warn('resp', error.response)\n        console.log(JSON.stringify(error, [\"message\", \"arguments\", \"type\", \"name\"]));\n        if(error.message === 'Network Error') return resolve({error:error.message})\n        else return resolve({error:error.response.data})\n      })\n\n\n\n\n\n\n    });\n\n\n\n\n\n\n}\n\n\n\n\n\nexport async function actualizePosts() {\n  console.warn('START OF ACTUALIZING')\n  let response = await request('get', 'posts/get');\n  console.warn('FIN ZH')\n  if(response.error) {console.warn('AN ERROR', response.error); return; }\n  console.warn('POSTS: ',response.result)\n  store.posts = response.result;\n}\n\n\n\n\nexport async function login(login, password) {\n  let response = await request('post', 'auth/login',{login, password});\n  console.log('>LOIGN', response)\n  if(response.error) {console.warn('AN ERROR', response.error); return; }\n  window.localStorage.feed_token = response.result;\n  store.loginForms = models.loginForms();\n  loginByToken(response.result);\n}\n\n\nexport async function loginByToken(token) {\n  let getMe = await request('get', 'auth/getMe?token='+token);\n  if(getMe.error) {\n    window.localStorage.removeItem('feed_token');\n    console.warn('WRONG TOKEN, so i am deleting it', getMe.error);\n    return;\n  }\n\n  let newUser = models.user();\n  newUser.loggedIn = true;\n  newUser.name = getMe.result.name;\n  newUser.email = getMe.result.email;\n  newUser.id = getMe.result.id;\n  newUser.token = token;\n  store.user = newUser;\n}\n\n\nexport async function logout() {\n  window.localStorage.removeItem('feed_token');\n  store.user = models.user();\n}\n\n\nexport async function addPost(text) {\n  let response = await request('post', 'posts/add', {\n    token:store.user.token,\n    text\n  });\n  if(response.error) {\n    console.warn('COULDNT ADD POST', response.error);\n    return;\n  }\n  store.newPostText = '';\n  actualizePosts();\n}\n","import React from 'react';\nimport store from 'zasz';\nimport './header.css';\nimport * as Api from 'Api';\n\nexport default (props) =>\n    <div className=\"Header\">\n      <div>\n        <div/>\n        {store.user.loggedIn &&\n          <div>\n            <div>{store.user.name}</div>\n            <div onClick={() => Api.logout()}>Logout</div>\n          </div>\n        }\n      </div>\n    </div>\n","import React from 'react';\nimport store from 'zasz';\n\nimport * as Api from 'Api';\n\nimport './loginForms.css';\n\n\n\nexport default (props) => {\n\n    let switchTab = (tab) => store.loginForms.tab = tab\n\n    let onNameChange = (e) => store.loginForms.name = e.target.value\n    let onLoginChange = (e) => store.loginForms.login = e.target.value\n    let onPasswordChange = (e) => store.loginForms.password = e.target.value\n    let prox = (e) => {\n      if(store.loginForms.tab==='registration') {\n        window.alert('THERE IS NO Registration POINT')\n      } else {\n        Api.login(store.loginForms.login, store.loginForms.password);\n      }\n\n\n\n    }\n\n\n\n    return (<div className=\"loginForms\">\n\n        <div className=\"tabs\">\n          <div className={store.loginForms.tab==='registration' && 'active'} onClick={()=>{switchTab('registration')}}>Registration</div>\n          <div className={store.loginForms.tab==='login' && 'active'} onClick={()=>{switchTab('login')}}>Login</div>\n        </div>\n\n        <div>\n          {\n              store.loginForms.tab==='registration' && <input type=\"text\" value={store.loginForms.name} placeholder=\"Name\" onChange={onNameChange} />\n          }\n          <input type=\"text\" value={store.loginForms.login} placeholder=\"Login (email)\" onChange={onLoginChange} />\n          <input type=\"password\" value={store.loginForms.password} placeholder=\"Password\" onChange={onPasswordChange} />\n        </div>\n\n        <div className=\"button\" onClick={prox}>Sign me {store.loginForms.tab==='registration' ? 'up' : 'in'}</div>\n\n    </div>)\n\n}\n","import React from 'react';\nimport store from 'zasz';\n\nimport * as Api from 'Api';\n\nimport './newPostForm.css';\n\n\nexport default (props) => {\n\n    let onNewPostTextChange = (e) => store.newPostText = e.target.value\n    let makePost = () => Api.addPost(store.newPostText);\n\n    return (<div className=\"newPostForm\">\n        <textarea value={store.newPostText} onChange={onNewPostTextChange} />\n        <div className=\"button\" onClick={makePost}>Add post</div>\n    </div>)\n}\n","import React from 'react';\nimport './aPost.css';\n\n\n\nexport default (props) => {\n    let {post} = props;\n    let d = new Date(post.datetime);\n    d = d.toString().split(' ');\n    let fDate = `${d[1]} ${d[2]} ${d[3]} ${d[4]}`;\n\n    return (\n      <div key={post.id} className=\"aPost\">\n        <div className=\"userName\">{post.authorname}</div>\n        <div className=\"postDatetime\">{fDate}</div>\n        <div className=\"text\">{post.text}</div>\n      </div>\n    )\n\n}\n","import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport './Styles.css';\nimport * as Api from 'Api';\n\nimport Header from 'components/header/header';\nimport LoginForms from 'components/loginForms/loginForms';\nimport NewPostForm from 'components/newPostForm/newPostForm';\nimport APost from 'components/aPost/aPost';\n\nimport store from 'zasz';\n\n\nclass App extends Component {\n\n\n  componentDidMount() {\n    console.log('App mounted at ', window.location);\n    console.log( process.env );\n    Api.actualizePosts();\n\n\n    if(window.localStorage.feed_token) {\n      console.log(' heaf goog ', window.localStorage.feed_token)\n      Api.loginByToken(window.localStorage.feed_token)\n    }\n  }\n\n\n\n\n  render() {\n\n\n    return (\n      <div className=\"App\">\n        <Header />\n\n        <div className=\"topPanel\">\n          <div>\n          {store.user.loggedIn ?\n            <NewPostForm />\n            :\n            <LoginForms />\n          }\n          </div>\n        </div>\n\n        <div className=\"postList\">\n          <div>{\n            store.posts.map(post => {\n              return <APost key={post.id} post={post} />\n            })\n          }</div>\n        </div>\n\n        <div className=\"footer\">\n          <div>\n            <div>&copy; Romka 2019</div>\n            <div>a test project</div>\n            <div>v0.03</div>\n          </div>\n        </div>\n\n\n      </div>\n    );\n\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport models from 'models';\nimport store, { Provider } from 'zasz';\n\nstore.user = models.user();\nstore.posts = [];\nstore.newPostText = '';\nstore.loginForms = models.loginForms();\n\nReactDOM.render(<Provider><App /></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}