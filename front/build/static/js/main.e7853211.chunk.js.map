{"version":3,"sources":["models.js","Api.js","components/header/header.js","components/loginForms/loginForms.js","components/newPostForm/newPostForm.js","components/aPost/aPost.js","App.js","index.js"],"names":["models","user","loggedIn","id","name","token","loginForms","login","password","tab","request","method","path","params","Promise","resolve","apiServer","window","location","origin","axios","then","response","console","log","data","result","error","warn","actualizePosts","_actualizePosts","apply","this","arguments","_callee","regenerator_default","a","wrap","_context","prev","next","sent","abrupt","store","posts","stop","_callee2","_context2","localStorage","feed_token","loginByToken","_x3","_loginByToken","_callee3","getMe","newUser","_context3","removeItem","email","_callee4","_context4","_callee5","text","_context5","newPostText","header_header","props","react_default","createElement","className","href","onClick","_logout","Api","loginForms_loginForms","switchTab","type","value","placeholder","onChange","e","target","alert","_x","_x2","_login","newPostForm_newPostForm","_x4","_addPost","aPost_aPost","post","d","Date","datetime","toString","split","fDate","concat","key","authorname","App","process","map","Component","ReactDOM","render","zasz","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e7853211.chunk.js","sourcesContent":["export default {\n  user: () => {return {loggedIn:false,id:null,name:'',token:''}},\n  loginForms: () => {return {name:'',login:'',password:'',tab:'registration'}}\n}\n","import axios from 'axios';\nimport store from 'zasz';\nimport models from 'models';\n\n\nfunction request(method, path, params) {\n  return new Promise((resolve) => {\n    \n      let apiServer = process.env.NODE_ENV==='development' ? 'http://localhost:5000/api/' : window.location.origin+'/api/';\n\n      axios[method](apiServer + path, params)\n      .then((response) => {\n        console.log('>2', response.data)\n        return resolve({result:response.data.result})\n      }, (error) => {\n        console.warn(error)\n        return resolve({error:error.response.data})\n      })\n    });\n}\n\n\n\n\n\nexport async function actualizePosts() {\n  console.warn('START OF ACTUALIZING')\n  let response = await request('get', 'posts/get');\n  console.warn('FIN ZH')\n  if(response.error) {console.warn('AN ERROR', response.error); return; }\n  console.warn('POSTS: ',response.result)\n  store.posts = response.result;\n}\n\n\n\n\nexport async function login(login, password) {\n  let response = await request('post', 'auth/login',{login, password});\n  console.log('>LOIGN', response)\n  if(response.error) {console.warn('AN ERROR', response.error); return; }\n  window.localStorage.feed_token = response.result;\n  store.loginForms = models.loginForms();\n  loginByToken(response.result);\n}\n\n\nexport async function loginByToken(token) {\n  let getMe = await request('get', 'auth/getMe?token='+token);\n  if(getMe.error) {\n    window.localStorage.removeItem('feed_token');\n    console.warn('WRONG TOKEN, so i am deleting it', getMe.error);\n    return;\n  }\n\n  let newUser = models.user();\n  newUser.loggedIn = true;\n  newUser.name = getMe.result.name;\n  newUser.email = getMe.result.email;\n  newUser.id = getMe.result.id;\n  newUser.token = token;\n  store.user = newUser;\n}\n\n\nexport async function logout() {\n  window.localStorage.removeItem('feed_token');\n  store.user = models.user();\n}\n\n\nexport async function addPost(text) {\n  let response = await request('post', 'posts/add', {\n    token:store.user.token,\n    text\n  });\n  if(response.error) {\n    console.warn('COULDNT ADD POST', response.error);\n    return;\n  }\n  store.newPostText = '';\n  actualizePosts();\n}\n","import React from 'react';\nimport store from 'zasz';\nimport './header.css';\nimport * as Api from 'Api';\n\nexport default (props) =>\n    <div className=\"Header\">\n      <div>\n        <div/>\n        {store.user.loggedIn &&\n          <div>\n            <div>{store.user.name}</div>\n            <a href=\"javascript:void(0)\" onClick={() => Api.logout()}>Logout</a>\n          </div>\n        }\n      </div>\n    </div>\n","import React from 'react';\nimport store from 'zasz';\n\nimport * as Api from 'Api';\n\nimport './loginForms.css';\n\n\n\nexport default (props) => {\n\n    let switchTab = (tab) => store.loginForms.tab = tab\n\n    let onNameChange = (e) => store.loginForms.name = e.target.value\n    let onLoginChange = (e) => store.loginForms.login = e.target.value\n    let onPasswordChange = (e) => store.loginForms.password = e.target.value\n    let prox = (e) => {\n      if(store.loginForms.tab==='registration') {\n        window.alert('THERE IS NO Registration POINT')\n      } else {\n        Api.login(store.loginForms.login, store.loginForms.password);\n      }\n\n\n\n    }\n\n\n\n    return (<div className=\"loginForms\">\n\n        <div className=\"tabs\">\n          <div className={store.loginForms.tab==='registration' && 'active'} onClick={()=>{switchTab('registration')}}>Registration</div>\n          <div className={store.loginForms.tab==='login' && 'active'} onClick={()=>{switchTab('login')}}>Login</div>\n        </div>\n\n        <div>\n          {\n              store.loginForms.tab==='registration' && <input type=\"text\" value={store.loginForms.name} placeholder=\"Name\" onChange={onNameChange} />\n          }\n          <input type=\"text\" value={store.loginForms.login} placeholder=\"Login (email)\" onChange={onLoginChange} />\n          <input type=\"password\" value={store.loginForms.password} placeholder=\"Password\" onChange={onPasswordChange} />\n        </div>\n\n        <div className=\"button\" onClick={prox}>Sign me {store.loginForms.tab==='registration' ? 'up' : 'in'}</div>\n\n    </div>)\n\n}\n","import React from 'react';\nimport store from 'zasz';\n\nimport * as Api from 'Api';\n\nimport './newPostForm.css';\n\n\nexport default (props) => {\n\n    let onNewPostTextChange = (e) => store.newPostText = e.target.value\n    let makePost = () => Api.addPost(store.newPostText);\n\n    return (<div className=\"newPostForm\">\n        <textarea value={store.newPostText} onChange={onNewPostTextChange} />\n        <div className=\"button\" onClick={makePost}>Add post</div>\n    </div>)\n}\n","import React from 'react';\nimport './aPost.css';\n\n\n\nexport default (props) => {\n    let {post} = props;\n    let d = new Date(post.datetime);\n    d = d.toString().split(' ');\n    let fDate = `${d[1]} ${d[2]} ${d[3]} ${d[4]}`;\n\n    return (\n      <div key={post.id} className=\"aPost\">\n        <div className=\"userName\">{post.authorname}</div>\n        <div className=\"postDatetime\">{fDate}</div>\n        <div className=\"text\">{post.text}</div>\n      </div>\n    )\n\n}\n","import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport './Styles.css';\nimport * as Api from 'Api';\n\nimport Header from 'components/header/header';\nimport LoginForms from 'components/loginForms/loginForms';\nimport NewPostForm from 'components/newPostForm/newPostForm';\nimport APost from 'components/aPost/aPost';\n\nimport store from 'zasz';\n\n\nclass App extends Component {\n\n\n  componentDidMount() {\n    console.log('App mounted at ', window.location);\n    console.log( process.env );\n    Api.actualizePosts();\n\n\n    if(window.localStorage.feed_token) {\n      console.log(' heaf goog ', window.localStorage.feed_token)\n      Api.loginByToken(window.localStorage.feed_token)\n    }\n  }\n\n\n\n\n  render() {\n\n\n    return (\n      <div className=\"App\">\n        <Header />\n\n        <div className=\"topPanel\">\n          <div>\n          {store.user.loggedIn ?\n            <NewPostForm />\n            :\n            <LoginForms />\n          }\n          </div>\n        </div>\n\n        <div className=\"postList\">\n          <div>{\n            store.posts.map(post => {\n              return <APost key={post.id} post={post} />\n            })\n          }</div>\n        </div>\n\n        <div className=\"footer\">\n          <div>\n            <div>&copy; Romka 2019</div>\n            <div>a test project</div>\n            <div>v0.02</div>\n          </div>\n        </div>\n\n\n      </div>\n    );\n\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport models from 'models';\nimport store, { Provider } from 'zasz';\n\nstore.user = models.user();\nstore.posts = [];\nstore.newPostText = '';\nstore.loginForms = models.loginForms();\n\nReactDOM.render(<Provider><App /></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}